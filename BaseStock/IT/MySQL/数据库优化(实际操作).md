最终手段:[我们该什么时候分库分表](https://mp.weixin.qq.com/s?__biz=MzIwODI1OTk1Nw==&mid=2650322981&idx=1&sn=644537003c300db69934aa7acee80c8c&chksm=8f09c63fb87e4f29b5bebeca1c03e102898fcbd663b6f189a78dba8cec646f875cc01832a221&token=1553501157&lang=zh_CN#rd)
MySQL优化的几种方式
	1.选取最适用的字段属性
	我们可以将表中字段的宽度设得尽可能小,让表变小达到更快的查询速度(例如:某个字段可以定义为CHAR(6)就不要定义为CHAR(255)浪费不必要的空间 同时尽可能把字段设置为NOTNULL这样查询的时候不会去比较NULL值 一些如'性别','
	'省份'字段可以定义为ENUM类型)
	2.使用jion来代替子查询Sub-Queries
	连接（JOIN）..之所以更有效率一些，是因为MySQL不需要在内存中创建临时表来完成这个逻辑上的需要两个步骤的查询工作。
	3.使用联合(UNION)来代替手动创建的临时表
	在客户端的查询会话结束的时候,临时表会被自动删除从而保证数据库整齐、高效。使用union来创建查询的时候，我们只需要用UNION作为关键字把多个select语句连接起来就可以了，要注意的是所有select语句中的字段数目要想同。
	4.事务
	事物以BEGIN关键字开始，COMMIT关键字结束。在这之间的一条SQL操作失败，那么，ROLLBACK命令就可以把数据库恢复到BEGIN开始之前的状态。事务的另一个重要作用是当多个用户同时使用相同的数据源时，它可以利用锁定数据库的方法来为用户提供一种安全的访问方式，这样可以保证用户的操作不被其它的用户所干扰。
	5.锁定表
	尽管事务是维护数据库完整性的一个非常好的方法，但却因为它的独占性，有时会影响数据库的性能，尤其是在很大的应用系统中。由于在事务执行的过程中，数据库将会被锁定，
	因此其它的用户请求只能暂时等待直到该事务结束。
	UPDATEinventorySETQuantity=11WHEREItem='book';UNLOCKTABLES
	6.使用外键
	锁定表的方法可以维护数据的完整性，但是它却不能保证数据的关联性。这个时候我们就可以使用外键。
	7.使用索引
	索引是提高数据库性能的常用方法，它可以令数据库服务器以比没有索引快得多的速度检索特定的行，尤其是在查询语句当中包含有MAX(),MIN()和ORDERBY这些命令的时候，性能提高更为明显。
	那该对哪些字段建立索引呢？
	一般说来，索引应建立在那些将用于JOIN,WHERE判断和ORDERBY排序的字段上。尽量不要对数据库中某个含有大量重复的值的字段建立索引。对于一个ENUM类型的字段来说，出现大量重复值是很有可能的情况
	8.优化查询语句
	用内连接而不用外连接
		用外连接的话连接顺序是固定死的，比如left join，他必须先对左表进行全表扫描，然后一条条到右表去匹配；而内连接的话mysql会自己根据查询优化器去判断用哪个表做驱动。
		-
		子查询的话同样也会对驱动表进行全表扫描，所以尽量用小表做驱动表。
什么是视图?,视图的使用场景有哪些?
	数据库视图概念和语句
		概念:就是封装了复杂查询语句的伪表
		视图语句体:
		create view 视图名称 as sql查询语句
		视图语句使用:
		select * from 视图名
		使用视图代替了大串sql语句来使用
	(1）视图是一种虚表
	（2）视图建立在已有表的基础上, 视图赖以建立的这些表称为基表
	（3）向视图提供数据内容的语句为 SELECT 语句,可以将视图理解为存储起来的 SELECT 语句
	（4）视图向用户提供基表数据的另一种表现形式
	（5）视图没有存储真正的数据，真正的数据是存储在基表中
	（6）程序员虽操作的是视图，但最终视图还会转成操作基表
	（7）一个基表可以有0个或多个视图
	视图可以进行一些单表操作,并且会改变原本引用表中的数据,但是不能进行很多多表操作
	视图可以将查询出来的数据进行封装。。。那么我们在使用的时候就会变得非常方便…
	值得注意的是：使用视图可以让我们专注与逻辑，但不提高查询效率
三种类型的删除的差别
	drop table
		1)属于DDL(Data Definition Language)数据定义语言
		2)不可回滚
		3)不可带where
		4)表内容和结构删除
		5)删除速度快
	truncate table
		1)属于DDL(Data Definition Language)数据定义语言
		2)不可回滚
		3)不可带where
		4)表内容删除
		5)删除速度快
	delete from
		1)属于DML(Data Manipulation Language))数据操纵语言
		2)可回滚
		3)可带where
		4)表结构在，表内容要看where执行的情况
		5)删除速度慢,需要逐行删除
	不再需要一张表的时候，用drop
	想删除部分数据行时候，用delete，并且带上where子句
	保留表而删除所有数据的时候用truncate

超键、候选键、主键、外键分别是什么？
超键：在关系中能唯一标识元组的属性集称为关系模式的超键。一个属性可以为作为一个超键，多个属性组合在一起也可以作为一个超键。超键包含候选键和主键。
候选键(候选码)：是最小超键，即没有冗余元素的超键。
主键(主码)：数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。
外键：在一个表中存在的另一个表的主键称此表的外键。

候选码和主码：例子：邮寄地址（城市名，街道名，邮政编码，单位名，收件人）

它有两个候选键:{城市名，街道名} 和 {街道名，邮政编码}

如果我选取{城市名，街道名}作为唯一标识实体的属性，那么{城市名，街道名} 就是主码(主键)


数据库知识点

数据库运行于哪种状态下可以防止数据的丢失？
在archivelog mode(归档模式)只要其归档日志文件不丢失，就可以有效地防止数据丢失。



数据表损坏的修复方式有哪些？
	1.使用 myisamchk 来修复，具体步骤：
		  1）修复前将mysql服务停止。
		  2）打开命令行方式，然后进入到mysql的/bin目录。
		  3）执行myisamchk –recover 数据库所在路径/*.MYI
	2.使用repair table 或者 OPTIMIZE table命令来修复，REPAIR TABLE table_name 修复表 OPTIMIZE TABLE table_name 优化表 REPAIR TABLE 用于修复被破坏的表。
		OPTIMIZE TABLE 用于回收闲置的数据库空间，当表上的数据行被删除时，所占据的磁盘空间并没有立即被回收，使用了OPTIMIZE TABLE命令后这些空间将被回收，并且对磁盘上的数据行进行重排（注意：是磁盘上，而非数据库）

存储过程与触发器的区别
	触发器与存储过程非常相似，触发器也是SQL语句集，两者唯一的区别是触发器不能用EXECUTE语句调用，
	而是在用户执行Transact-SQL语句时自动触发（激活）执行。触发器是在一个修改了指定表中的数据时执行的存储过程
	。通常通过创建触发器来强制实现不同表中的逻辑相关数据的引用完整性和一致性。由于用户不能绕过触发器，
	所以可以用它来强制实施复杂的业务规则，以确保数据的完整性。触发器不同于存储过程，
	触发器主要是通过事件执行触发而被执行的，而存储过程可以通过存储过程名称名字而直接调用。
	当对某一表进行诸如UPDATE、INSERT、DELETE这些操作时，SQLSERVER就会自动执行触发器所定义的SQL语句，
	从而确保对数据的处理必须符合这些SQL语句所定义的规则。


触发器分为事前触发和事后触发，这两种触发有什么区别。语句级触发和行级触发有何区别。
	事前触发器运行于触发事件发生之前，而事后触发器运行于触发事件发生之后。通常事前触发器可以获取事件之前和新的字段值。语句级触发器可以在语句执行前或后执行，而行级触发在触发器所影响的每一行触发一次。

  

存储过程和函数的区别
	存储过程是用户定义的一系列sql语句的集合，涉及特定表或其它对象的任务，用户可以调用存储过程，而函数通常是数据库已定义的方法，它接收参数并返回某种类型的值并且不涉及特定用户表。
	-
	另外，存储过程和函数还有以下几个区别：
	1）存储过程一般是作为一个独立的部分来执行的，而函数可以作为查询语句的一个部分来调用。由于函数可以返回一个对象，因此它可以在查询语句中位于From关键字的后面。
	2）一般而言，存储过程实现的功能较为复杂，而函数实现的功能针对性较强。
	3）函数需要用括号包住输入的参数，且只能返回一个值或表对象，而存储过程可以返回多个参数
	4）函数可以嵌入在SQL中使用，可以在SELECT中调用，存储过程不行。
	5）函数不能直接操作实体表，只能操作内建表。
	6）存储过程在创建时即在服务器上进行了编译，其执行速度比函数快。

游标的作用？如何知道游标已经到了最后？
	游标用于定位结果集的行，通过判断全局变量@@FETCH_STATUS可以判断是否到了最后，通常此变量不等于0表示出错或到了最后。

（关系数据库中的操作会对整个行集起作用。由 SELECT 语句返回的行集包括满足该语句的 WHERE 子句中条件的所有行。这种由语句返回的完整行集称为结果集。应用程序，特别是交互式联机应用程序，并不总能将整个结果集作为一个单元来有效地处理。这些应用程序需要一种机制以便每次处理一行或一部分行。游标就是提供这种机制的对结果集的一种扩展。

游标的特点是：

允许定位在结果集的特定行。

从结果集的当前位置检索一行或一部分行。

支持对结果集中当前位置的行进行数据修改。

为由其他用户对显示在结果集中的数据库数据所做的更改提供不同级别的可见性支持。

提供脚本、存储过程和触发器中用于访问结果集中的数据的 Transact-SQL 语句

在从游标中提取信息后，可以通过判断@@FETCH_STATUS 的值来判断是否到了最后。当@@FETCH_STATUS为0的时候，说明提取是成功的，否则就可以认为到了最后。）

  

//查看账号信息不过密码是md5加密的
select * from mysql.user;