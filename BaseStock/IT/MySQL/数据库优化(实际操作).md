最终手段:[我们该什么时候分库分表](https://mp.weixin.qq.com/s?__biz=MzIwODI1OTk1Nw==&mid=2650322981&idx=1&sn=644537003c300db69934aa7acee80c8c&chksm=8f09c63fb87e4f29b5bebeca1c03e102898fcbd663b6f189a78dba8cec646f875cc01832a221&token=1553501157&lang=zh_CN#rd)
**MySQL优化的几种方式**
	1.选取最适用的字段属性
	我们可以将表中字段的宽度设得尽可能小,让表变小达到更快的查询速度(例如:某个字段可以定义为CHAR(6)就不要定义为CHAR(255)浪费不必要的空间 同时尽可能把字段设置为NOTNULL这样查询的时候不会去比较NULL值 一些如'性别','
	'省份'字段可以定义为ENUM类型)
	2.使用jion来代替子查询Sub-Queries
	连接（JOIN）..之所以更有效率一些，是因为MySQL不需要在内存中创建临时表来完成这个逻辑上的需要两个步骤的查询工作。
	3.使用联合(UNION)来代替手动创建的临时表
	在客户端的查询会话结束的时候,临时表会被自动删除从而保证数据库整齐、高效。使用union来创建查询的时候，我们只需要用UNION作为关键字把多个select语句连接起来就可以了，要注意的是所有select语句中的字段数目要想同。
	4.事务
	事物以BEGIN关键字开始，COMMIT关键字结束。在这之间的一条SQL操作失败，那么，ROLLBACK命令就可以把数据库恢复到BEGIN开始之前的状态。事务的另一个重要作用是当多个用户同时使用相同的数据源时，它可以利用锁定数据库的方法来为用户提供一种安全的访问方式，这样可以保证用户的操作不被其它的用户所干扰。
	5.锁定表
	尽管事务是维护数据库完整性的一个非常好的方法，但却因为它的独占性，有时会影响数据库的性能，尤其是在很大的应用系统中。由于在事务执行的过程中，数据库将会被锁定，
	因此其它的用户请求只能暂时等待直到该事务结束。
	UPDATEinventorySETQuantity=11WHEREItem='book';UNLOCKTABLES
	6.使用外键
	锁定表的方法可以维护数据的完整性，但是它却不能保证数据的关联性。这个时候我们就可以使用外键。
	7.使用索引
	索引是提高数据库性能的常用方法，它可以令数据库服务器以比没有索引快得多的速度检索特定的行，尤其是在查询语句当中包含有MAX(),MIN()和ORDERBY这些命令的时候，性能提高更为明显。
	那该对哪些字段建立索引呢？
	一般说来，索引应建立在那些将用于JOIN,WHERE判断和ORDERBY排序的字段上。尽量不要对数据库中某个含有大量重复的值的字段建立索引。对于一个ENUM类型的字段来说，出现大量重复值是很有可能的情况
	8.优化查询语句
	用内连接而不用外连接
		用外连接的话连接顺序是固定死的，比如left join，他必须先对驱动表(leftjoin就是左表)进行全表扫描，然后一条条到右表去匹配；而内连接(inneer join)的话mysql会自己根据查询优化器去判断用哪个表做驱动。
		-
		子查询的话同样也会对驱动表进行全表扫描，所以尽量用小表做驱动表。

**MySQL如何做慢SQL优化**
	开启慢查询日志（ SET GLOBAL long_query_time=阈值;超过阈值的sql就会记录到慢查询日志当中），或查看执行计划（explain+SQL）。慢查询优化如下：
	（1）分析sql语句，是否加载了不需要的数据列
	（2）分析sql执行计划，字段有没有索引，索引是否失效，是否用对索引
	（3） 使用复杂查询时，尽量使用关联查询来代替子查询，并且最好使用内连接
	（4）orderby查找时使用索引进行排序，否则的话需要进行回表，然后在排序缓冲区中进行排序。
	（5）groupby查询时，同样要建立联合索引，避免使用到临时表
	（6）分页查询时，如果偏移量太大，比如要查询一百万条数据后的十条记录，可以使用主键+子查询的方式，避免进行全表扫描
	（7）使用count函数时直接使用count的话count(*)的效率最高，也可以额外创建一张表去统计不同表中的数据行数，但维护麻烦
	count(*)或count(唯一索引)或count(数字):表中总记录数，count(字段)不会统计null
	(8) 在写update语句时，where条件要添加使用索引，否则会锁会从行锁升级为表锁
	（9）表中数据是否太大，是不是要分库分表


  

